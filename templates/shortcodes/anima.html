{% if nth == 1 %}
{% set data = load_data(path="../templates/shortcodes/anima.js", format="plain") %}
<script>
    {{ data | safe }}
</script>
<template id="anima-puzzle-template">
    <div data-ref="board" tabindex="0"></div>
    <div class="info">
        <h3 data-ref="name"></h3>
        <p class="need-focus">
            Focus the puzzle to begin.
        </p>
        <p>
            Moves so far: <span data-ref="moveCount">0</span>
        </p>
        <p>
            Optimal solution: <span data-ref="optimalCount">0</span>
        </p>
    </div>
    <style>
        :host {
            display: flex;
            align-items: center;
            margin: 0 auto;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }
        :host [data-ref="board"] {
            background-color: #e8e8e8;
            background-image:  linear-gradient(135deg, #cccccc 25%, transparent 25%), linear-gradient(225deg, #cccccc 25%, transparent 25%), linear-gradient(45deg, #cccccc 25%, transparent 25%), linear-gradient(315deg, #cccccc 25%, #e8e8e8 25%);
            background-position:  18px 0, 18px 0, 0 0, 0 0;
            background-size: 36px 36px;
            background-repeat: repeat;
            position: relative;
            border-radius: 0.75rem;
            border: 0.5rem solid transparent;
            overflow: visible;
        }
        :host(.active) .need-focus {
            display: none;
        }
        :host [data-ref="board"]::after {
            content: " ";
            display: block;
            background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='111.58' height='80.006' version='1.1' viewBox='0 0 111.57827 80.006501' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%3E%3Cmetadata%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:format%3Eimage/svg+xml%3C/dc:format%3E%3Cdc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage'/%3E%3Cdc:title/%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m110.45 22.652c-1.0152-0.76245-2.4134-0.75457-3.414 0.01636l-29.369 22.42-19.275-43.549c-0.91154-2.0522-4.2759-2.0522-5.1905 0l-19.501 44.05-29.113-22.898c-1.0055-0.78609-2.4116-0.8079-3.4359-0.053335-1.0279 0.76002-1.417 2.1164-0.95579 3.2989l20.226 52.262c0.4188 1.0928 1.4728 1.8085 2.6407 1.8085h65.462c1.177 0 2.2219-0.71275 2.6425-1.8085l20.224-52.262c0.45759-1.1825 0.0739-2.5243-0.94124-3.2843z' fill='%23ffd42a'/%3E%3C/svg%3E%0A");
            background-position: center center;
            background-repeat: no-repeat;
            position: absolute;
            left: 50%;
            top: 50%;
            width: 120px;
            height: 100px;
            opacity: 0.75;
            transform: translate(-50%, -50%) scale(0.0);
            transform-origin: center;
            transition: transform 0.25s cubic-bezier(0.64, 0.57, 0.67, 1.53);
        }
        :host(.solved) [data-ref="board"]::after {
            transform: translate(-50%, -50%) scale(1.0);
        }
        .tile {
            position: absolute;
        }
        .tile::before {
            content: " ";
            display: block;
            position: absolute;
            background: #fff;
            width: calc(100% - 0.15rem);
            height: calc(100% - 0.15rem);
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            border-radius: 0.75rem;
        }
        .tile.goal::after {
            content: " ";
            display: block;
            position: absolute;
            width: 25%;
            height: 25%;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            background-color: #ccc;
        }
        .tile.goal.red::after {
            background-color: #ff0046;
        }
        .tile.goal.blue::after {
            background-color: #0989B2;
        }
        .info {
            margin-left: 1rem;
        }
    </style>
</template>
<template id="anima-actor-template">
    <style>
        :host {
            display: block;
            position: absolute;
            transition: left 0.15s, bottom 0.15s;
        }
        .color {
            display: block;
            position: absolute;
            overflow: hidden;
            width: calc(100% - 0.6rem);
            height: calc(100% - 0.6rem);
            border-radius: 0.4rem;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }
        :host .color::after {
            content: " ";
            position: absolute;
            width: 40%;
            height: 40%;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            border: 100px solid;
        }
        :host(.red) .color::after {
            border-color: #ff0046;
        }
        :host(.blue) .color::after {
            border-color: #0989B2;
        }
    </style>
    <div class="color"></div>
</template>
{% endif %}
<script class="anima-data" type="application/json">
    {{ body | safe }}
</script>
